{% load static %}
{% load custom_filters %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–≤—Ç–æ –∏–∑ {{ country_temp }} | Sewa</title>
    <meta name="description" content="–ê–≤—Ç–æ–º–æ–±–∏–ª–∏ –∏–∑ {{ country_temp }} —Å —Ä–∞—Å—Ç–∞–º–æ–∂–∫–æ–π –±–µ–∑ –ø—Ä–æ–±–µ–≥–∞ –ø–æ –†–æ—Å—Å–∏–∏. üöò –ü–æ–ª–Ω–∞—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –º–æ–¥–µ–ª–µ–π –∏ –±—Ä–µ–Ω–¥–æ–≤. –ü–æ–º–æ–∂–µ–º –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö: –æ—Ç —Ä–∞—Å—Ç–∞–º–æ–∂–∫–∏ –¥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ü–¢–°. –û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ–¥–±–æ—Ä –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ.">
    <link rel="icon" type="image/png" href="{% static 'favicon-sewa/favicon-96x96.png' %}" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{% static 'favicon-sewa/favicon.svg' %}" />
    <link rel="shortcut icon" href="{% static 'favicon-sewa/favicon.ico' %}" />
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon-sewa/apple-touch-icon.png' %}" />
    <link rel="manifest" href="{% static 'favicon-sewa/site.webmanifest' %}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/home.css' %}" />
    <script src="{% static 'js/imask/Imask.min.js' %}"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">


</head>
<body>
<header class="container-fluid py-3 bg-light">
        <div class="container d-flex justify-content-between align-items-center">
            <a href="{% url 'home' %}">
            <div>
                <img src="{% static 'img/Logo.png' %}" alt="–õ–æ–≥–æ—Ç–∏–ø" height="69" width="70">
            </div>
            </a>

            <nav>
                <ul class="nav">
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:japan' %}">–Ø–ø–æ–Ω—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:korea' %}">–ö–æ—Ä–µ–π—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:china' %}">–ö–∏—Ç–∞–π—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:europe' %}">–ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">–û –∫–æ–º–ø–∞–Ω–∏–∏</a></li>
                </ul>
            </nav>

            <div class="d-flex align-items-center">
                <div class="me-5">
                    <a href="#" class="me-2"><img src="{% static 'img/tg.png' %}" alt="Telegram" width="28"></a>
                    <a href="#" class="me-2"><img src="{% static 'img/Youtube.png' %}" alt="Youtube" width="28"></a>
                    <a href="#" class="me-2"><img src="{% static 'img/vk.png' %}" alt="vk" width="28"></a>
                </div>
                <div class="text-end">
                    <a href="#" class="mb-0 fw-bold header-phone">{{ contact.phone }}</a>
                    <a href="https://t.me/your_username" class="header-write-ws">–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
                </div>
            </div>
        </div>
    </header>

<section class="container text-white text-start mt-5 container-main container-main-catalog" style="background: url('/static/img/Images-car-catalog-effect.png') right/cover no-repeat; background-size: 942px 245px; background-position-y: 100%;">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <span class="mt-0"><a href="/" style="color: #757575!important; font-size: 13px;">–ì–ª–∞–≤–Ω–∞—è</a> <svg xmlns="http://www.w3.org/2000/svg" width="10" height="13" viewBox="0 0 7 10" fill="none" class="ms-1 me-1">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M0.982384 0.359337C1.17765 0.164075 1.49423 0.164075 1.68949 0.359337L5.97616 4.646C6.06993 4.73977 6.1226 4.86695 6.1226 4.99956C6.1226 5.13217 6.06993 5.25934 5.97616 5.35311L1.68949 9.63978C1.49423 9.83504 1.17765 9.83504 0.982384 9.63978C0.787122 9.44452 0.787122 9.12793 0.982384 8.93267L4.9155 4.99956L0.982384 1.06644C0.787122 0.871182 0.787122 0.554599 0.982384 0.359337Z" fill="#D5D5D5" fill-opacity="0.5"/>
                    </svg> <a href="{{ request.path }}" style="color: white!important; font-size: 13px;">–ê–≤—Ç–æ –∏–∑ {{ country_temp }}</a>
                    </span>
                    <h1 class="promo-h1 mt-5" style="font-weight: 800;">–ê–≤—Ç–æ –∏–∑ {{ country_temp }}</h1>
                    <p class="mt-1" style="font-size: 15px;">–•–æ—Ä–æ—à–∏–µ –º–∞—à–∏–Ω—ã –ø–æ–∫—É–ø–∞—é—Ç—Å—è –∑–¥–µ—Å—å</p>


                </div>
            </div>
        </div>
    </section>

<section class="container popular-cars">
    <div class="container mt-3">
        <form method="get">
        <div class="row block-filter py-3 px-3 g-3">
            <div class="col-md-3">
                <div class="custom-dropdown">
                    <div class="dropdown-button">
                        {% if request.GET.brand %}
                        <span style="color: #757575!important;" class="fw-bold">{{ brand_map|get_item:request.GET.brand }}</span>
                        {% else %}
                        –ú–∞—Ä–∫–∞ –∞–≤—Ç–æ
                        {% endif %}
                    </div>
                    <ul class="dropdown-list" id="brand-dropdown-list">
                        {% if country_temp != '–ö–∏—Ç–∞—è' %}
                        <div style="display: flex; gap: 5px;">
                            {% if country_temp == '–ö–æ—Ä–µ–∏' %}
                            <li data-value="Í∏∞ÏïÑ,KIA" style="display: inline-block;" class="popular-brand-catalog">Kia</li>
                            <li data-value="HYUNDAI" style="display: inline-block;" class="popular-brand-catalog">Hyundai</li>
                            {% elif country_temp == '–Ø–ø–æ–Ω–∏–∏' %}
                            <li data-value="ÌòºÎã§,HONDA" style="display: inline-block;" class="popular-brand-catalog">Honda</li>
                            <li data-value="ÌÜ†ÏöîÌÉÄ,TOYOTA,ÎèÑÏöîÌÉÄ" style="display: inline-block;" class="popular-brand-catalog">Toyota</li>
                            <li data-value="SUBARU,Ïä§Î∞îÎ£®" style="display: inline-block;" class="popular-brand-catalog">Subaru</li>
                            {% elif country_temp == '–ï–≤—Ä–æ–ø—ã' %}
                            <li data-value="BMW" style="display: inline-block;" class="popular-brand-catalog">Bmw</li>
                            <li data-value="ÏïÑÏö∞Îîî,AUDI" style="display: inline-block;" class="popular-brand-catalog">Audi</li>
                            <li data-value="VOLVO,Î≥ºÎ≥¥" style="display: inline-block;" class="popular-brand-catalog">Volvo</li>
                            {% endif %}
                        </div>
                        <hr>
                        {% endif %}
                        <li data-value="">–õ—é–±–∞—è</li>
                        {% for keys, value in result.items %}
                        <li data-value="{{ keys|join:',' }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="brand" value="{% if request.GET.brand %}{{ request.GET.brand }}{% endif %}">
                </div>
            </div>

            <div class="col-md-3">
                <div class="custom-dropdown">
                    <div class="dropdown-button" id="dropdown-button-model">
                        {% if request.GET.model %}
                        <span style="color: #757575!important;" class="fw-bold" id="model-get-request"></span>
                        {% else %}
                        –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ
                        {% endif %}
                    </div>
                    <ul class="dropdown-list dropdown-list-models" id="model-dropdown-list">

                    </ul>
                    <input type="hidden" name="model" value="{% if request.GET.model %}{{ request.GET.model }}{% endif %}">
                </div>
            </div>

<!--            <div class="col-md-3">-->
<!--                <div class="custom-dropdown">-->
<!--                    <div class="dropdown-button">-->
<!--                        {% if request.GET.auction %}-->
<!--                        <span style="color: #757575!important;" class="fw-bold">{{ request.GET.auction }}</span>-->
<!--                        {% else %}-->
<!--                         –ê—É–∫—Ü–∏–æ–Ω-->
<!--                        {% endif %}-->
<!--                    </div>-->
<!--                    <ul class="dropdown-list">-->
<!--                        <li data-value="">–õ—é–±–æ–π</li>-->
<!--                        <li data-value="encar">Encar</li>-->
<!--                        <li data-value="kcar">Kcar</li>-->
<!--                        <li data-value="charancha">Charancha</li>-->
<!--                        <li data-value="mpark">Mpark</li>-->
<!--                        <li data-value="bobaedream">Bobaedream</li>-->
<!--                    </ul>-->
<!--                    <input type="hidden" name="auction" value="{% if request.GET.auction %}{{ request.GET.auction }}{% endif %}">-->
<!--                </div>-->
<!--            </div>-->

            <div class="col-md-3">
                <div class="custom-dropdown">
                    <div class="dropdown-button">
                        {% if request.GET.drive %}
                        <span style="color: #757575!important;" class="fw-bold">{{ drive_map|get_item:request.GET.drive }}</span>
                        {% else %}
                        –ü—Ä–∏–≤–æ–¥
                        {% endif %}
                    </div>
                    <ul class="dropdown-list">
                        <li data-value="">–õ—é–±–æ–π</li>
                        {% for keys, value in drive.items %}
                        <li data-value="{{ keys|join:',' }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="drive" value="{% if request.GET.drive %}{{ request.GET.drive }}{% endif %}">
                </div>
            </div>

            <div class="col-md-3">
                <div class="custom-dropdown">
                    <div class="dropdown-button">
                        {% if request.GET.transmission %}
                        <span style="color: #757575!important;" class="fw-bold">{{ transmission_map|get_item:request.GET.transmission }}</span>
                        {% else %}
                        –¢–∏–ø –ö–ü–ü
                        {% endif %}
                    </div>
                    <ul class="dropdown-list">
                        <li data-value="">–õ—é–±–æ–π</li>
                        {% for keys, value in transmission.items %}
                        <li data-value="{{ keys|join:',' }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="transmission" value="{% if request.GET.transmission %}{{ request.GET.transmission }}{% endif %}">
                </div>
            </div>

            <div class="col-md-3">
                <div class="custom-dropdown d-flex">
                    <div class="dropdown-button" style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">
                        {% if request.GET.engine_volume_from %}
                        <span style="color: #757575!important;" class="fw-bold">{{ engine_volume|get_item_int:request.GET.engine_volume_from }}</span>
                        {% else %}
                        –û–±—ä–µ–º –æ—Ç
                        {% endif %}
                    </div>
                    <ul class="dropdown-list">
                        <li data-value="">–û–±—ä–µ–º –æ—Ç</li>
                        {% for keys, value in engine_volume.items %}
                        <li data-value="{{ keys }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="engine_volume_from" value="{% if request.GET.engine_volume_from %}{{ request.GET.engine_volume_from }}{% endif %}">

                    <div class="dropdown-button dropdown-button-to-engine_volume" style="border-top-left-radius: 0px; border-bottom-left-radius: 0px;">
                        <span style="margin-left: -15px; color: #D9D9D9;" class="me-2">|</span>
                        {% if request.GET.engine_volume_to %}
                        <span style="color: #757575!important;" class="fw-bold">{{ engine_volume|get_item_int:request.GET.engine_volume_to }}</span>
                        {% else %}
                        –¥–æ
                        {% endif %}
                    </div>
                    <ul class="dropdown-list dropdown-list-to-engine_volume">
                        <li data-value="">–¥–æ</li>
                        {% for keys, value in engine_volume.items %}
                        <li data-value="{{ keys }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="engine_volume_to" class="input-engine_volume_to" value="{% if request.GET.engine_volume_to %}{{ request.GET.engine_volume_to }}{% endif %}">
                </div>
            </div>



            <div class="col-md-3">
                <div class="custom-dropdown d-flex">
                    <div class="dropdown-button" style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">
                        {% if request.GET.year_from %}
                        <span style="color: #757575!important;" class="fw-bold">{{ request.GET.year_from }}</span>
                        {% else %}
                        –ì–æ–¥ –æ—Ç
                        {% endif %}
                    </div>
                    <ul class="dropdown-list">
                        <li data-value="">–ì–æ–¥ –æ—Ç</li>
                        {% for keys, value in year.items %}
                        <li data-value="{{ keys }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="year_from" value="{% if request.GET.year_from %}{{ request.GET.year_from }}{% endif %}">

                    <div class="dropdown-button dropdown-button-to-year" style="border-top-left-radius: 0px; border-bottom-left-radius: 0px;">
                        <span style="margin-left: -15px; color: #D9D9D9;" class="me-2">|</span>
                        {% if request.GET.year_to %}
                        <span style="color: #757575!important;" class="fw-bold">{{ request.GET.year_to }}</span>
                        {% else %}
                        –¥–æ
                        {% endif %}
                    </div>
                    <ul class="dropdown-list dropdown-list-to-year">
                        <li data-value="">–¥–æ</li>
                        {% for keys, value in year.items %}
                        <li data-value="{{ keys }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="year_to" class="input-year_to" value="{% if request.GET.year_to %}{{ request.GET.year_to }}{% endif %}">
                </div>
            </div>

            <div class="col-md-3">
                <div class="custom-dropdown">
                    <div class="dropdown-button">
                        {% if request.GET.car_fuel %}
                        <span style="color: #757575!important;" class="fw-bold">{{ car_fuel_map|get_item:request.GET.car_fuel }}</span>
                        {% else %}
                        –¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞
                        {% endif %}
                    </div>
                    <ul class="dropdown-list">
                        <li data-value="">–õ—é–±–æ–π</li>
                        {% for keys, value in car_fuel.items %}
                        <li data-value="{{ keys|join:',' }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="car_fuel" value="{% if request.GET.car_fuel %}{{ request.GET.car_fuel }}{% endif %}">
                </div>
            </div>



            <div class="col-md-3">
                <div style="display: flex; position: relative; width: fit-content; height: 46px;">
                        <input class="form-control input-price" name="price_from" value="{% if request.GET.price_from %}{{ request.GET.price_from }}{% endif %}" placeholder="–¶–µ–Ω–∞ –æ—Ç, ‚ÇΩ" style="border-top-right-radius: 0px!important; border-bottom-right-radius: 0px!important;" oninput="formatPrice(this)">

<!--                    <div class="dropdown-button" style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">-->
<!--                        {% if request.GET.price_from %}-->
<!--                        <span style="color: #757575!important;" class="fw-bold">{{ request.GET.price_from }}</span>-->
<!--                        {% else %}-->
<!--                        –¶–µ–Ω–∞ –æ—Ç-->
<!--                        {% endif %}-->
<!--                    </div>-->
<!--                    <ul class="dropdown-list">-->
<!--                        <li data-value="700000">700 000 ‚ÇΩ</li>-->
<!--                        <li data-value="1200000">1 200 000 ‚ÇΩ</li>-->
<!--                    </ul>-->
<!--                    <input type="hidden" name="price_from" value="{% if request.GET.price_from %}{{ request.GET.price_from }}{% endif %}">-->



                            <input name="price_to" class="form-control input-price" value="{% if request.GET.price_to %}{{ request.GET.price_to }}{% endif %}" placeholder="–¥–æ" style="border-top-left-radius: 0px!important; border-bottom-left-radius: 0px!important;" oninput="formatPrice(this)">

                            <div class="divider"></div>



<!--                    <div class="dropdown-button dropdown-button-to" style="border-top-left-radius: 0px; border-bottom-left-radius: 0px;">-->
<!--                        <span style="margin-left: -15px; color: #D9D9D9;" class="me-2">|</span>-->
<!--                        {% if request.GET.price_to %}-->
<!--                        <span style="color: #757575!important;" class="fw-bold">{{ request.GET.price_to }}</span>-->
<!--                        {% else %}-->
<!--                        –¥–æ-->
<!--                        {% endif %}-->
<!--                    </div>-->
<!--                    <ul class="dropdown-list dropdown-list-to">-->
<!--                        <li data-value="700000">800 000 ‚ÇΩ</li>-->
<!--                        <li data-value="1200000">1 200 000 ‚ÇΩ</li>-->
<!--                    </ul>-->
<!--                    <input type="hidden" name="price_to" class="input-price_to" value="{% if request.GET.price_to %}{{ request.GET.price_to }}{% endif %}">-->

                </div>
            </div>

            <div class="col-md-3">
                <div class="custom-dropdown d-flex">
                    <div class="dropdown-button" style="border-top-right-radius: 0px; border-bottom-right-radius: 0px;">
                        {% if request.GET.mileage_from %}
                        <span style="color: #757575!important;" class="fw-bold">{{ mileage|get_item_int:request.GET.mileage_from }}</span>
                        {% else %}
                        –ü—Ä–æ–±–µ–≥ –æ—Ç
                        {% endif %}
                    </div>
                    <ul class="dropdown-list">
                        <li data-value="">–ü—Ä–æ–±–µ–≥ –æ—Ç</li>
                        {% for keys, value in mileage.items %}
                        <li data-value="{{ keys }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="mileage_from" value="{% if request.GET.mileage_from %}{{ request.GET.mileage_from }}{% endif %}">

                    <div class="dropdown-button dropdown-button-to-mileage" style="border-top-left-radius: 0px; border-bottom-left-radius: 0px;">
                        <span style="margin-left: -15px; color: #D9D9D9;" class="me-2">|</span>
                        {% if request.GET.mileage_to %}
                        <span style="color: #757575!important;" class="fw-bold">{{ mileage|get_item_int:request.GET.mileage_to }}</span>
                        {% else %}
                        –¥–æ
                        {% endif %}
                    </div>
                    <ul class="dropdown-list dropdown-list-to-mileage">
                        <li data-value="">–¥–æ</li>
                        {% for keys, value in mileage.items %}
                        <li data-value="{{ keys }}">{{ value }}</li>
                        {% endfor %}
                    </ul>
                    <input type="hidden" name="mileage_to" class="input-mileage_to" value="{% if request.GET.mileage_to %}{{ request.GET.mileage_to }}{% endif %}">
                </div>
            </div>


<!--            <div class="col-md-3" style="display: flex;">-->
<!--                <div class="d-flex" style="align-items: center;">-->
<!--                    <div class="d-flex align-items-center">-->
<!--                    <input class="check-color" type="checkbox" id="agree-color" data-value="">-->
<!--                    <span class="me-3" style="font-size: 13px;">–õ—é–±–æ–π</span>-->
<!--                        </div>-->
<!--                    <div class="color-circle me-3" data-value="red" style="background-color: red;"></div>-->
<!--                    <div class="color-circle me-3" data-value="green" style="background-color: green;"></div>-->
<!--                    <div class="color-circle me-3" data-value="black" style="background-color: black;"></div>-->
<!--                    <div class="color-circle me-3" data-value="blue" style="background-color: blue;"></div>-->
<!--                    <div class="color-circle me-3" data-value="pink" style="background-color: pink;"></div>-->
<!--                    <div class="dropdown-button-color" style="border: 1px solid #C4C4C4; background-color: white;">‚ãÆ</div>-->
<!--                    <div style="display: inline-block; position: absolute; margin-top: 25px;">-->
<!--                        <ul class="dropdown-list dropdown-list-color">-->
<!--                            <li data-value="red">–ö—Ä–∞—Å–Ω—ã–π</li>-->
<!--                            <li data-value="green">–ó–µ–ª–µ–Ω—ã–π</li>-->
<!--                            <li data-value="blue">–°–∏–Ω–∏–π</li>-->
<!--                            <li data-value="yellow">–ñ–µ–ª—Ç—ã–π</li>-->
<!--                        </ul>-->
<!--                    </div>-->

<!--                    <input type="hidden" name="color" id="selectedColor">-->
<!--                </div>-->


<!--            </div>-->

            <div class="d-flex align-items-center mt-4 ">
                <button class="me-4 btn-filter-catalog">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</button>
                <a href="{{ request.path }}" style="color: #333333;">–°–±—Ä–æ—Å–∏—Ç—å</a>
            </div>

        </div>
        </form>

        <div class="row mt-4 mb-4">
            <div class="col-md-3">
                <div class="custom-dropdown-order">
                    <div class="dropdown-button-order">
                        {% if request.GET.order %}
                        {% if request.GET.order == 'price_increase' %}
                        <span style="color: #757575!important;">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã</span>
                        {% elif request.GET.order == 'price_decreasing' %}
                        <span style="color: #757575!important;">–ü–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã</span>
                        {% elif request.GET.order == 'year_increase' %}
                        <span style="color: #757575!important;">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</span>
                        {% elif request.GET.order == 'year_decreasing' %}
                        <span style="color: #757575!important;">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</span>
                        {% elif request.GET.order == 'mileage_increase' %}
                        <span style="color: #757575!important;">–°–Ω–∞—á–∞–ª–∞ —Å –Ω–∏–∑–∫–∏–º –ø—Ä–æ–±–µ–≥–æ–º</span>
                        {% elif request.GET.order == 'mileage_decreasing' %}
                        <span style="color: #757575!important;">–°–Ω–∞—á–∞–ª–∞ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–æ–±–µ–≥–æ–º</span>
                        {% endif %}
                        {% else %}
                        –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
                        {% endif %}
                    </div>
                    <ul class="dropdown-list" style="width: 312px!important;">
                        <li style="padding: 0;"><a href="?{% for key, val in request.GET.items %}{% if key != 'order' %}{{ key }}={{ val }}&{% endif %}{% endfor %}order=price_increase" style="display: block; padding: 10px;">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã</a></li>
                        <li style="padding: 0;"><a href="?{% for key, val in request.GET.items %}{% if key != 'order' %}{{ key }}={{ val }}&{% endif %}{% endfor %}order=price_decreasing" style="display: block; padding: 10px;">–ü–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã</a></li>

                        <li style="padding: 0;"><a href="?{% for key, val in request.GET.items %}{% if key != 'order' %}{{ key }}={{ val }}&{% endif %}{% endfor %}order=year_increase" style="display: block; padding: 10px;">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</a></li>
                        <li style="padding: 0;"><a href="?{% for key, val in request.GET.items %}{% if key != 'order' %}{{ key }}={{ val }}&{% endif %}{% endfor %}order=year_decreasing" style="display: block; padding: 10px;">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</a></li>

                        <li style="padding: 0;"><a href="?{% for key, val in request.GET.items %}{% if key != 'order' %}{{ key }}={{ val }}&{% endif %}{% endfor %}order=mileage_increase" style="display: block; padding: 10px;">–°–Ω–∞—á–∞–ª–∞ —Å –Ω–∏–∑–∫–∏–º –ø—Ä–æ–±–µ–≥–æ–º</a></li>
                        <li style="padding: 0;"><a href="?{% for key, val in request.GET.items %}{% if key != 'order' %}{{ key }}={{ val }}&{% endif %}{% endfor %}order=mileage_decreasing" style="display: block; padding: 10px;">–°–Ω–∞—á–∞–ª–∞ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–æ–±–µ–≥–æ–º</a></li>
                    </ul>
                    <input type="hidden" name="order">
                </div>
            </div>
        </div>


    </div>


    <div class="row mt-3">
        {% for car in cars %}
        {% if car.photo %}
        <div class="col-12 col-md-3">
            <div class="card card-car">
                    <div class="position-relative">
                        <a href="{% url 'catalog:car' car.id %}">
                        <img src="{% if car.auction == 'encar' %} {{ car.photo|filter_photo }} {% else %} {{ car.photo }} {% endif %}" class="card-img-top" alt="–ê–≤—Ç–æ">
                        </a>
                        <div class="position-absolute bottom-0 px-3 py-3">
                            {% if car.rule %}
                            <small class="me-1 rule-img-car">{{ car.rule }}</small>
                            {% endif %}
                            <small class="me-1 param-img-car">{{ car.mileage|format_number }} –∫–º</small>
                            {% if car.rate %}
                            <small class="param-img-car me-1">{{ car.rate }}</small>
                            {% endif %}
                            {% if car.engine_volume != '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ' and car.engine_volume != '0' %}
                            <small class="param-img-car me-1">{{ car.engine_volume|cc_to_liters }} –ª</small>
                            {% endif %}
                        </div>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title fw-bold" style="line-clamp: 1;">
                            {{ car.ru_brand }} {{ car.ru_model }}
                        </h5>
                        <span class="card-text text-muted mb-3">
                            {% if car.year %}
                            {{ car.year }} &bull;
                            {% endif %}
                            {% if car.drive and car.drive != '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ' %}
                            {{ car.drive|translate_drive }} &bull;
                            {% endif %}
                            {% if car.car_fuel and car.car_fuel != '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ' %}
                            {{ car.car_fuel|translate_engine }} &bull;
                            {% endif %}
                            {% if car.transmission and car.transmission != '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ' %}
                            {{ car.transmission|translate_transmission }}
                            {% endif %}
                        </span>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="fw-bold price-car-card">
                                {% if car.toll and car.toll != -1 %}
                                {{ car.toll|format_price }} <span class="logo-rub">‚ÇΩ</span>
                                {% else %}
                                –£—Ç–æ—á–Ω–∏—Ç—å
                                {% endif %}
                            </span>
                            <a class="btn-feedback-card-car" id="btn-feedback-card-car" style="cursor: pointer;">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</a>
                        </div>
                    </div>
                </div>
        </div>
        {% endif %}
        {% if forloop.counter == 4 %}
        <div class="row" style="margin: 0;">
        <div class="promo-block-catalog d-flex justify-content-between">
            <div class="text-content-promo">
                <p style="font-weight: 800; font-size: 24px;">{{ promo_car.name }}</p>
                <p><span style="font-weight: 700; font-size: 18px;">{{ promo_car.price|format_price }} <span class="logo-rub">‚ÇΩ</span> </span><del style="font-size: 16px;">{{ promo_car.price|add_percent:promo_car.percent_price|format_price }} <span style="font-size: 18px;">‚ÇΩ</span> </del></p>
                <div style="margin-top: 26px;">
                <a class="promo-catalog-btn" id="promo-catalog-btn" href="{% url 'catalog:promo-car' promo_car.id %}" style="cursor: pointer;">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a >
                    </div>
            </div>
            <div class="image-content-promo">
                <img src="{{ promo_car.images.all.0.image.url }}" class="img-fluid" style="border-top-right-radius: 20px; border-bottom-right-radius: 20px;">
            </div>
        </div>
            </div>
        {% endif %}
        {% endfor %}





    </div>

    <div class="mt-2 pagination">
    {% if current_page > 1 %}
        <a href="?{% for key, val in request.GET.items %}{% if key != 'page' %}{{ key }}={{ val }}&{% endif %}{% endfor %}page={{ current_page|add:-1 }}" class="pagination-page">–ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
    {% endif %}

    <a href="?{% for key, val in request.GET.items %}{% if key != 'page' %}{{ key }}={{ val }}&{% endif %}{% endfor %}page=1" class="pagination-page {% if current_page == 1 %}active{% endif %}">1</a>

    {% if current_page > 4 %}
        <span class="pagination-page">...</span>
    {% endif %}

    {% for page in page_range %}
        {% if page > 1 and page < total_pages %}
            <a href="?{% for key, val in request.GET.items %}{% if key != 'page' %}{{ key }}={{ val }}&{% endif %}{% endfor %}page={{ page }}" class="pagination-page {% if page == current_page %}active{% endif %}">{{ page }}</a>
        {% endif %}
    {% endfor %}

    {% if current_page < total_pages|add:-3 %}
        <span class="pagination-page">...</span>
    {% endif %}

    {% if total_pages > 1 %}
        <a href="?{% for key, val in request.GET.items %}{% if key != 'page' %}{{ key }}={{ val }}&{% endif %}{% endfor %}page={{ total_pages }}" class="pagination-page {% if current_page == total_pages %}active{% endif %}">{{ total_pages }}</a>
    {% endif %}

    {% if current_page < total_pages %}
        <a href="?{% for key, val in request.GET.items %}{% if key != 'page' %}{{ key }}={{ val }}&{% endif %}{% endfor %}page={{ current_page|add:1 }}" class="pagination-page">–°–ª–µ–¥—É—é—â–∞—è</a>
    {% endif %}
</div>



</section>




<section class="container container-contact" style="background: url('/static/img/–ö–æ–Ω—Ç–∞–∫—Ç—ã.png') right/cover no-repeat;">
    <div class="row">
        <div class="col-md-6 mb-5">
            <h1 style="font-size: 48px; font-weight: 800;">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h1>
            <p style="font-size: 14px;">–û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ—é –∑–∞—è–≤–∫—É –∏ –Ω–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –í–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.</p>
            <div class="mt-5">
                <div>
                    <span style="color: #dddddd; font-size: 14px">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>
                    <p style="font-size: 14px;">{{ contact.phone }}</p>
                </div>
                <div class="mt-5">
                    <span style="color: #dddddd; font-size: 14px">–ù–∞–ø–∏—Å–∞—Ç—å</span>
                    <p style="font-size: 14px;">{{ contact.email }}</p>
                </div>
                <div class="mt-5">
                    <span style="color: #dddddd; font-size: 14px">–ê–¥—Ä–µ—Å</span>
                    <p style="font-size: 14px;">{{ contact.address }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-5">
            <div class="contact-form">
                <h3 style="font-weight: 800; font-size: 24px;">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</h3>
                <form method="post" id="contact-feedback">
                    {% csrf_token %}
                    <div class="row mb-3 mt-4">
                        <div class="col-md-6">
                            <label for="name" class="form-label" style="font-size: 14px;">–ò–º—è</label>
                            <input type="text" id="name" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" required>
                        </div>
                        <div class="col-md-6">
                            <label for="phone" class="form-label" style="font-size: 14px;">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="phone" class="form-control" placeholder="+7 (___) ___-__-__" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="message" class="form-label" style="font-size: 14px;">–£—Ç–æ—á–Ω–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å</label>
                        <textarea id="message" class="form-control" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"></textarea>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mt-5">
                        <div class="form-check d-flex justify-content-between align-items-center">
                            <input class="form-check-input" type="checkbox" id="agree" required checked>
                            <label class="form-check-label ms-3" for="agree" style="font-size: 13px;">
                                –° –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω
                            </label>
                        </div>

                        <button type="submit" class="contact-from-bnt">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<footer class="container py-3 bg-light px-5">
    <div class="container d-flex justify-content-between align-items-center">
            <a href="{% url 'home' %}">
            <div>
                <img src="{% static 'img/Logo.png' %}" alt="–õ–æ–≥–æ—Ç–∏–ø" height="69" width="70">
            </div>
            </a>

            <nav>
                <ul class="nav">
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:japan' %}">–Ø–ø–æ–Ω—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:korea' %}">–ö–æ—Ä–µ–π—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:china' %}">–ö–∏—Ç–∞–π—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalog:europe' %}">–ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ –∞–≤—Ç–æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">–û –∫–æ–º–ø–∞–Ω–∏–∏</a></li>
                </ul>
            </nav>

            <div class="d-flex align-items-center">
                <div>
                    <a href="#" class="me-2"><img src="{% static 'img/tg.png' %}" alt="Telegram" width="28"></a>
                    <a href="#" class="me-2"><img src="{% static 'img/Youtube.png' %}" alt="Youtube" width="28"></a>
                    <a href="#" class="me-2"><img src="{% static 'img/vk.png' %}" alt="vk" width="28"></a>
                </div>
            </div>
        </div>
    <hr>
    <div class="d-flex justify-content-between align-items-center">
        <span style="color: #555252; font-size: 13px;"> –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.</span>
        <span style="color: #555252; font-size: 13px;">¬© 2021 Sewa Motors</span>
    </div>
</footer>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div class="modal fade" id="costModal" tabindex="-1" aria-labelledby="costModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-feedback modal-dialog-centered">
    <div class="modal-content modal-content-feedback">

      <div class="modal-body modal-body-feedback">
          <form method="post" style="width: 1181px;" id="feedback-modal">
              {% csrf_token %}
          <div class="row" style="width: 1181px;">
              <div class="col-md-7 left-col-modal" >
                  <h1 style="color: white; font-size: 28px; font-weight: 700; padding: 28px; line-height: 150%;">–û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –∏ –Ω–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –ø–æ–¥–±–µ—Ä—É—Ç –ª—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥ –≤–∞—à –±—é–¥–∂–µ—Ç</h1>
                  <div style="padding: 28px;">
                        <span style="color: white; display: block; margin-bottom: 12px; font-size: 14px;">–ú—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö</span>
                        <div class="d-flex align-items-center">
                            <a href="#" class="me-2"><img src="{% static 'img/Social Media Icon.png' %}" alt="Wa" width="28"></a>
                            <a href="#" class="me-2"><img src="{% static 'img/Artboard.png' %}" alt="Telegram" width="28"></a>
                            <a href="#" class="me-2"><img src="{% static 'img/Social Media Icon-youtube.png' %}" alt="YouTube" width="28"></a>
                        </div>
                    </div>
              </div>
              <div class="col-md-5" style="padding: 28px;">
              <div class="col-md-12">
        <label for="name-modal" class="form-label" style="font-size: 14px;">–ò–º—è</label>
        <input type="text" id="name-modal" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" required style="background-color: #F6F6F6;">
                  </div>
              <div class="col-md-12 mt-3">
                  <label for="phone-modal" class="form-label" style="font-size: 14px;">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="phone-modal" class="form-control" placeholder="+7 (___) ___-__-__" required style="background-color: #F6F6F6;">
              </div>
              <div class="col-md-12 mt-3">
                   <label class="form-label" style="font-size: 14px;">–ì–æ—Ä–æ–¥</label>
                  <div class="custom-dropdown-modal">
                        <div class="dropdown-button-modal" style="background-color: #F6F6F6;">–ö—É–¥–∞ –¥–æ—Å—Ç–∞–≤–ª—è–µ–º?</div>
                        <ul class="dropdown-list-modal">
                            {% for city in city_delivery %}
                            <li data-value="{{ city }}">{{ city }}</li>
                            {% endfor %}
                        </ul>
                        <input type="hidden" name="city-modal" id="city-modal">
                    </div>
                  </div>
              <div class="col-md-12 mt-3">
                  <label for="message-modal" class="form-label" style="font-size: 14px;">–ö–∞–∫–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –∏—â–∏—Ç–µ?</label>
                  <textarea id="message-modal" class="form-control" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è" style="background-color: #F6F6F6;"></textarea>
              </div>
              <div class="d-flex justify-content-between align-items-center mt-5">
                        <div class="form-check d-flex justify-content-between align-items-center">
                            <input class="form-check-input form-check-input-modal" type="checkbox" id="agree-modal" required checked>
                            <label class="form-check-label ms-3" for="agree" style="font-size: 13px;">
                                –° –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω
                            </label>
                        </div>

                        <button type="submit" class="btn-delivery" style="padding-left: 16px; padding-right: 16px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
          </div>
          </div>
          </form>
      </div>

    </div>
  </div>
</div>

<script>
function formatPrice(input) {
    let value = input.value.replace(/[^\d]/g, '');

    if (value.length > 0) {
        value = parseInt(value, 10).toLocaleString('ru-RU');
    }

    input.value = value;
}

document.addEventListener('DOMContentLoaded', function() {
    const priceInputs = document.querySelectorAll('.input-price');
    priceInputs.forEach(input => {
        if (input.value) {
            formatPrice(input);
        }
    });
});
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdowns = document.querySelectorAll(".custom-dropdown");

        const dropdown_order = document.querySelector(".custom-dropdown-order");

        const button_order = dropdown_order.querySelector(".dropdown-button-order");
        const list_order = dropdown_order.querySelector(".dropdown-list");
        const hiddenInput_order = dropdown_order.querySelector("input");

        button_order.addEventListener("click", function () {
            list_order.classList.toggle("show");
        });

        list_order.querySelectorAll("li").forEach(item => {
            item.addEventListener("click", function () {
                button_order.textContent = this.textContent;
                hiddenInput_order.value = this.dataset.value;
                list_order.classList.remove("show");
                button_order.classList.remove("error");
            });
        });

        document.addEventListener("click", function (event) {
            if (!dropdown_order.contains(event.target)) {
                list_order.classList.remove("show");
            }
        });

        dropdowns.forEach(dropdown => {
            const button = dropdown.querySelector(".dropdown-button");
            const list = dropdown.querySelector(".dropdown-list");
            const hiddenInput = dropdown.querySelector("input");

            button.addEventListener("click", function () {
                list.classList.toggle("show");
            });

            list.querySelectorAll("li").forEach(item => {
                item.addEventListener("click", function () {
                    button.textContent = this.textContent;
                    button.style.color = "#757575";
                    button.style.fontWeight = "bold";
                    hiddenInput.value = this.dataset.value;
                    list.classList.remove("show");
                    button.classList.remove("error");
                });
            });

            document.addEventListener("click", function (event) {
                if (!dropdown.contains(event.target)) {
                    list.classList.remove("show");
                }
            });
        });

        const button_to_year = document.querySelector(".dropdown-button-to-year");
        const list_to_year = document.querySelector(".dropdown-list-to-year");
        const hiddenInputYearTo = document.querySelector(".input-year_to");

        button_to_year.addEventListener("click", function () {
            list_to_year.classList.toggle("show");
        });

        list_to_year.querySelectorAll("li").forEach(item => {
            item.addEventListener("click", function () {
                button_to_year.textContent = this.textContent + ' ';
                const newSpan = document.createElement('span');
                newSpan.style.marginLeft = '-15px';
                newSpan.style.color = '#D9D9D9';
                newSpan.classList.add('me-2');
                newSpan.textContent = '|';
                button_to_year.prepend(newSpan);
                hiddenInputYearTo.value = this.dataset.value;
                list_to_year.classList.remove("show");
                button_to_year.classList.remove("error");
                button_to_year.style.color = "#757575";
                button_to_year.style.fontWeight = "bold";
            });
        });

        document.addEventListener("click", function (event) {
            if (!button_to_year.contains(event.target)) {
                list_to_year.classList.remove("show");
            }
        });

        const button_to_mileage = document.querySelector(".dropdown-button-to-mileage");
        const list_to_mileage = document.querySelector(".dropdown-list-to-mileage");
        const hiddenInputMileageTo = document.querySelector(".input-mileage_to");

        button_to_mileage.addEventListener("click", function () {
            list_to_mileage.classList.toggle("show");
        });

        list_to_mileage.querySelectorAll("li").forEach(item => {
            item.addEventListener("click", function () {
                button_to_mileage.textContent = this.textContent + ' ';
                const newSpan = document.createElement('span');
                newSpan.style.marginLeft = '-15px';
                newSpan.style.color = '#D9D9D9';
                newSpan.classList.add('me-2');
                newSpan.textContent = '|';
                button_to_mileage.prepend(newSpan);
                hiddenInputMileageTo.value = this.dataset.value;
                list_to_mileage.classList.remove("show");
                button_to_mileage.classList.remove("error");
                button_to_mileage.style.color = "#757575";
                button_to_mileage.style.fontWeight = "bold";
            });
        });

        document.addEventListener("click", function (event) {
            if (!button_to_mileage.contains(event.target)) {
                list_to_mileage.classList.remove("show");
            }
        });

        const button_to_engine_volume = document.querySelector(".dropdown-button-to-engine_volume");
        const list_to_engine_volume = document.querySelector(".dropdown-list-to-engine_volume");
        const hiddenInputEngineVolumeTo = document.querySelector(".input-engine_volume_to");

        button_to_engine_volume.addEventListener("click", function () {
            list_to_engine_volume.classList.toggle("show");
        });

        list_to_engine_volume.querySelectorAll("li").forEach(item => {
            item.addEventListener("click", function () {
                button_to_engine_volume.textContent = this.textContent + ' ';
                const newSpan = document.createElement('span');
                newSpan.style.marginLeft = '-15px';
                newSpan.style.color = '#D9D9D9';
                newSpan.classList.add('me-2');
                newSpan.textContent = '|';
                button_to_engine_volume.prepend(newSpan);
                hiddenInputEngineVolumeTo.value = this.dataset.value;
                list_to_engine_volume.classList.remove("show");
                button_to_engine_volume.classList.remove("error");
                button_to_engine_volume.style.color = "#757575";
                button_to_engine_volume.style.fontWeight = "bold";
            });
        });

        document.addEventListener("click", function (event) {
            if (!button_to_engine_volume.contains(event.target)) {
                list_to_engine_volume.classList.remove("show");
            }
        });

    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
    const brandDropdown = document.querySelector("#brand-dropdown-list");
    const hiddenBrandInput = document.querySelector("input[name='brand']");
    const modelDropdown = document.querySelector("#model-dropdown-list");
    const hiddenModelInput = document.querySelector("input[name='model']");
    const buttonModel = document.querySelector("#dropdown-button-model");

    if (brandDropdown) {
        brandDropdown.addEventListener("click", function (event) {
            const selectedItem = event.target;
            if (selectedItem.tagName === "LI") {
                const brandValue = selectedItem.getAttribute("data-value");

                fetchModels(brandValue);
            }
        });
    }

    function fetchModels(brandValue) {
        fetch(`http://94.241.142.204/catalog/get-models/?brand=${brandValue}&ip=94.241.142.204`)
            .then(response => response.json())
            .then(data => {
                updateModelDropdown(data);
            })
            .catch(error => console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π:", error));
    }

    function updateModelDropdown(data) {
        if (!modelDropdown) return;
        modelDropdown.innerHTML = "";

        Object.entries(data).forEach(([key, value]) => {
            const li = document.createElement("li");
            li.textContent = value;
            li.setAttribute("data-value", key);
            li.addEventListener("click", function () {
                hiddenModelInput.value = key;
                buttonModel.textContent = value;
                buttonModel.style.color = "#757575";
                buttonModel.style.fontWeight = "bold";
                modelDropdown.classList.remove("show");
            });
            modelDropdown.appendChild(li);
        });
    }
});

</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {

    const modelDropdown = document.querySelector("#model-dropdown-list");
    const hiddenModelInput = document.querySelector("input[name='model']");
    const buttonModel = document.querySelector("#dropdown-button-model");

    function fetchModels(brandValue) {
        fetch(`http://94.241.142.204/catalog/get-models/?brand=${brandValue}&ip=94.241.142.204`)
            .then(response => response.json())
            .then(data => {
                updateModelDropdown(data);
            })
            .catch(error => console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π:", error));
    }

    function updateModelDropdown(data) {
        if (!modelDropdown) return;
        modelDropdown.innerHTML = "";

        Object.entries(data).forEach(([key, value]) => {
            const li = document.createElement("li");
            li.textContent = value;
            li.setAttribute("data-value", key);
            li.addEventListener("click", function () {
                hiddenModelInput.value = key;
                buttonModel.textContent = value;
                buttonModel.style.color = "#757575";
                buttonModel.style.fontWeight = "bold";
                modelDropdown.classList.remove("show");
            });
            modelDropdown.appendChild(li);
        });

        const params = new URLSearchParams(window.location.search);
        const model = params.get("model");

        const spanModel = document.querySelector("#model-get-request");
        spanModel.textContent = data[model];
    }

    const params = new URLSearchParams(window.location.search);
    const brand = params.get("brand");

    if (brand) {
        fetchModels(brand);
    }
});
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const colorCircles = document.querySelectorAll(".color-circle");
        const dropdownButton = document.querySelector(".dropdown-button-color");
        const dropdownList = document.querySelector(".dropdown-list-color");
        const hiddenInput = document.getElementById("selectedColor");
        const agreeColorCheckbox = document.getElementById("agree-color");

        colorCircles.forEach(circle => {
            circle.addEventListener("click", function () {
                if (agreeColorCheckbox.checked) {
                    agreeColorCheckbox.checked = false;
                }

                hiddenInput.value = this.dataset.value;

                dropdownButton.style.backgroundColor = 'white';
                dropdownButton.innerHTML = '‚ãÆ';
                dropdownButton.style.color = 'black';

                colorCircles.forEach(c => {
                    c.innerHTML = '';
                    c.style.color = '';
                    c.style.justifyContent = '';
                    c.style.display = '';
                });

                circle.innerHTML = "&#10003;";
                circle.style.color = "white";
                circle.style.justifyContent = 'center';
                circle.style.display = 'flex';
            });
        });

        dropdownButton.addEventListener("click", function () {
            colorCircles.forEach(c => c.classList.remove("selected"));
            dropdownList.style.display = dropdownList.style.display === "block" ? "none" : "block";
        });

        dropdownList.addEventListener("click", function (event) {
            if (event.target.tagName === "LI") {
                const selectedColor = event.target.dataset.value;
                hiddenInput.value = event.target.dataset.value;
                dropdownList.style.display = "none";

                colorCircles.forEach(c => {
                    c.innerHTML = '';
                    c.style.color = '';
                    c.style.justifyContent = '';
                    c.style.display = '';
                });

                dropdownButton.style.backgroundColor = selectedColor;
                dropdownButton.innerHTML = "&#10003;";
                dropdownButton.style.color = 'white';
                agreeColorCheckbox.checked = false;
            }
        });

        agreeColorCheckbox.addEventListener("change", function () {
            if (this.checked) {
                hiddenInput.value = ""; // Reset selected color
                dropdownButton.style.backgroundColor = 'white';
                dropdownButton.innerHTML = '‚ãÆ';
                dropdownButton.style.color = 'black';

                colorCircles.forEach(circle => {
                    circle.innerHTML = '';
                    circle.style.color = '';
                    circle.style.justifyContent = '';
                    circle.style.display = '';
                });
            }
        });

        document.addEventListener("click", function (event) {
            if (!dropdownButton.contains(event.target) && !dropdownList.contains(event.target)) {
                dropdownList.style.display = "none";
            }
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
    const dropdowns = document.querySelectorAll(".custom-dropdown-modal");

    dropdowns.forEach(dropdown => {
        const button = dropdown.querySelector(".dropdown-button-modal");
        const list = dropdown.querySelector(".dropdown-list-modal");
        const hiddenInput = dropdown.querySelector("input");

        button.addEventListener("click", function () {
            list.classList.toggle("show");
        });

        list.querySelectorAll("li").forEach(item => {
            item.addEventListener("click", function () {
                button.textContent = this.textContent;
                button.style.color = 'black';
                hiddenInput.value = this.dataset.value;
                list.classList.remove("show");
                button.classList.remove("error");
            });
        });

        document.addEventListener("click", function (event) {
            if (!dropdown.contains(event.target)) {
                list.classList.remove("show");
            }
        });
    });

});

</script>

<script>
  var buttons = document.querySelectorAll('#btn-feedback-card-car');

  buttons.forEach(function(button) {
    button.addEventListener('click', function() {
      var myModal = new bootstrap.Modal(document.getElementById('costModal'), {});
      myModal.show();
    });
  });

</script>

<script>
    document.getElementById('contact-feedback').addEventListener('submit', function(e) {
    e.preventDefault();

    const formData = {
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        message: document.getElementById('message').value,
    };

    const options = {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie()
        },
        body: JSON.stringify(formData)
    };

    const url = 'http://94.241.142.204/feedback/';

    fetch(url, options)
        .then(response => {
            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—ã');
            }
            return response.json();
        })
        .then(data => {
            alert('–§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
            document.getElementById('contact-feedback').reset();
        })
        .catch(error => {
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã.');
        });
});

function getCookie(name) {
    const csrfToken = document.querySelector("[name=csrfmiddlewaretoken]").value;
    return csrfToken;
}
</script>

<script>
    document.getElementById('feedback-modal').addEventListener('submit', function(e) {
    e.preventDefault();

    const formData = {
        name: document.getElementById('name-modal').value,
        phone: document.getElementById('phone-modal').value,
        message: document.getElementById('message-modal').value,
        city_delivery: document.getElementById('city-modal').value
    };

    const options = {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie()
        },
        body: JSON.stringify(formData)
    };

    const url = 'http://94.241.142.204/feedback/';

    fetch(url, options)
        .then(response => {
            if (!response.ok) {
                throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—ã');
            }
            return response.json();
        })
        .then(data => {
            alert('–§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
            document.getElementById('feedback-modal').reset();
        })
        .catch(error => {
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã.');
        });
});

function getCookie(name) {
    const csrfToken = document.querySelector("[name=csrfmiddlewaretoken]").value;
    return csrfToken;
}
</script>

<script defer>
document.addEventListener('DOMContentLoaded', () => {

    document.querySelectorAll('input[type="tel"]').forEach(input => {
        let phoneMask = IMask(input, {
        mask: "+{7} (000) 000-00-00",
        validate: function(value, masked) {
            if (value.startsWith('+7 (8')) {
                return false;
            }
            return true;
        }
        });

        function validatePhoneNumber() {
            let t = input.value.replace(/\D/g, "");
            return t.length < 11 ? (input.setCustomValidity("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –º–∏–Ω–∏–º—É–º 11 —Ü–∏—Ñ—Ä"), !1) : (input.setCustomValidity(""), !0);
        }

        input.addEventListener("input", validatePhoneNumber);
    });
});
</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
    const header = document.querySelector('header');
    let lastScroll = 0;

    window.addEventListener('scroll', () => {
        const currentScroll = window.scrollY;

        if (currentScroll <= 0) {
            header.classList.remove('header-hidden');
            return;
        }

        if (currentScroll > lastScroll) {
            header.classList.add('header-hidden');
        } else {
            header.classList.remove('header-hidden');
        }

        lastScroll = currentScroll;
    });
});
</script>

</body>
</html>